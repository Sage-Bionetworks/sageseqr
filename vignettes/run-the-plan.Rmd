---
title: "Run the targets plan"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Run the targets plan}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  eval = FALSE
)
```

1. [Write your own config file](https://sage-bionetworks.github.io/sageseqr/articles/customize-config.html).

2. Specify the active configuration by setting `R_CONFIG_ACTIVE`.

```{r config-setup}
profile_set <- "default"
Sys.setenv(R_CONFIG_ACTIVE = profile_set)
```

3. Load the `sageseqr` library and login to [Synapse](https://www.synapse.org/). `start_de()` copies the `targets` plan to your working directory. Execute `targets::make()` to compute. Run this code from your project root.

```{r run-plan}
library(sageseqr)
# Login to Synapse. Make a Synapse account and use synapser to login: https://r-docs.synapse.org/articles/manageSynapseCredentials.html
synapser::synLogin()

# gather the dependencies
start_de()
# inspect the steps of the workflow
targets::tar_manifest()
# run the analysis
targets::tar_make()
```

4. Visualize the results of your work. 

```{r visualize}
targets::tar_glimpse(
  targets_only = TRUE
)
```
